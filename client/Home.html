<!-- @format -->

<script>
  import {onMount, onDestroy} from 'svelte'
  import {blur} from 'svelte/transition'

  import QR from './QR.html'
  import account from './accountStore'

  let names = [
    'Etleneum',
    'ڪيانا',
    'Etleniko',
    '菠蘿蜜',
    'Etẽlenum',
    '素晴らしい虹',
    'Etljeneo'
  ]
  let name = 'Etleneum'
  let rotation = 0
  let visible = true
  var intv

  onMount(() => {
    intv = setInterval(() => {
      visible = false
      setTimeout(() => {
        name = names[names.indexOf(name) + (1 % (names.length - 1))]
        rotation = rotation + 60
        visible = true
      }, 1)
    }, 4000)
  })
  onDestroy(() => {
    clearInterval(intv)
  })
</script>

<style>
  * {
    text-align: center;
  }
  main {
    padding: 0 100px;
  }
  header img {
    height: 14rem;
  }
  header h1 {
    font-size: 2.4rem;
    font-weight: normal;
  }
</style>

<main>
  <header class="center">
    {#if visible}
    <img
      in:blur="{{amount:10, duration: 450}}"
      out:blur="{{amount: 10, duration: 450}}"
      src="/static/icon.png"
      alt="etleneum logo"
      style="transform: rotate({rotation}deg)"
    />
    <h1
      in:blur="{{amount:10, duration: 450}}"
      out:blur="{{amount: 10, duration: 450}}"
    >
      {name}
    </h1>
    {/if}
  </header>
  <h2>
    Etleneum is a global, open-source platform for the centralized applications.
  </h2>
  <p>
    On Etleneum you can write code that controls digital value, runs exactly as
    programmed, and is accessible anywhere in the world.
  </p>
  <p>
    <a href="#/docs">Read more</a>{#if window.location.host !==
    'test.etleneum.com'} and start creating some <em>free</em> contracts in the
    <a href="https://test.etleneum.com">test website</a>{/if}.
  </p>

  {#if window.location.host !== 'test.etleneum.com'}
  <p>
    This is a test website. You can create contracts and run calls for free.
    Whenever you see an invoice, just wait and it will be paid automatically
    after some seconds. You can login and have a balance, but withdrawals are
    impossible.
  </p>
  {/if}

  <div class="center">
    {#if $account.id}
    <p>
      Logged as <b><a href="#/account">{$account.id}</a></b
      >.
    </p>
    {:else if $account.lnurl.auth}
    <QR value="{$account.lnurl.auth}" />
    <p>scan to login</p>
    {/if}
  </div>
</main>
